{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAOC,SAASC,cAAc,kBAC9BC,EAAaF,SAASC,cAAc,wBACpCE,EAAeH,SAASC,cAAc,2BAE5CC,EAAWE,iBACT,QACAC,EAAAR,GAAES,UAAS,SAAAC,GACT,IACE,IAAMC,EAAM,CACVC,MAAOF,EAAMG,cAAcC,MAC3BC,QAASb,EAAKc,SAASD,QAAQD,OAE3BG,EAAkBC,KAAKC,UAAUR,GACvCS,aAAaC,QAAQ,sBAAuBJ,E,CAC5C,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAMP,Q,IAE1C,MAGLT,EAAaC,iBACX,QACAC,EAAAR,GAAES,UAAS,SAAAC,GACT,IACE,IAAMC,EAAM,CACVC,MAAOV,EAAKc,SAASJ,MAAME,MAC3BC,QAASL,EAAMG,cAAcC,OAEzBG,EAAkBC,KAAKC,UAAUR,GACvCS,aAAaC,QAAQ,sBAAuBJ,E,CAC5C,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAMP,Q,IAE1C,MAGLS,OAAOjB,iBAAiB,QAAQ,SAAAG,GAC9B,IACE,IAAMO,EAAkBG,aAAaK,QAAQ,uBACvCd,EACgB,OAApBM,OAA2BS,EAAYR,KAAKS,MAAMV,QACxCS,IAARf,GACFT,EAAKc,SAASJ,MAAME,MAAQ,GAC5BZ,EAAKc,SAASD,QAAQD,MAAQ,KAE9BZ,EAAKc,SAASJ,MAAME,MAAQH,EAAIC,MAChCV,EAAKc,SAASD,QAAQD,MAAQH,EAAII,Q,CAEpC,MAAOO,GACPC,QAAQD,MAAM,oBAAqBA,EAAMP,Q,KAI7Cb,EAAKK,iBAAiB,UAAU,SAAAG,GAC9B,IACEA,EAAMkB,iBACNR,aAAaS,WAAW,uBACxB,IAAMZ,EAAkBG,aAAaK,QAAQ,uBACvCd,EACgB,OAApBM,EACI,CACEL,MAAO,GACPG,QAAS,IAEXG,KAAKS,MAAMV,GAEjBM,QAAQO,IAAI,UAAoBC,OAAVpB,EAAIC,QAC1BW,QAAQO,IAAI,YAAwBC,OAAZpB,EAAII,UAC5Bb,EAAK8B,O,CACL,MAAOV,GACPC,QAAQD,MAAM,oBAAqBA,EAAMP,Q","sources":["src/js/03-feedback.js"],"sourcesContent":["import _, { throttle } from 'lodash';\n\nconst form = document.querySelector('.feedback-form');\nconst emailInput = document.querySelector('.feedback-form input');\nconst messageInput = document.querySelector('.feedback-form textarea');\n\nemailInput.addEventListener(\n  'input',\n  _.throttle(event => {\n    try {\n      const inf = {\n        email: event.currentTarget.value,\n        message: form.elements.message.value,\n      };\n      const serializedState = JSON.stringify(inf);\n      localStorage.setItem('feedback-form-state', serializedState);\n    } catch (error) {\n      console.error('Set state error: ', error.message);\n    }\n  }, 500)\n);\n\nmessageInput.addEventListener(\n  'input',\n  _.throttle(event => {\n    try {\n      const inf = {\n        email: form.elements.email.value,\n        message: event.currentTarget.value,\n      };\n      const serializedState = JSON.stringify(inf);\n      localStorage.setItem('feedback-form-state', serializedState);\n    } catch (error) {\n      console.error('Set state error: ', error.message);\n    }\n  }, 500)\n);\n\nwindow.addEventListener('load', event => {\n  try {\n    const serializedState = localStorage.getItem('feedback-form-state');\n    const inf =\n      serializedState === null ? undefined : JSON.parse(serializedState);\n    if (inf === undefined) {\n      form.elements.email.value = '';\n      form.elements.message.value = '';\n    } else {\n      form.elements.email.value = inf.email;\n      form.elements.message.value = inf.message;\n    }\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n});\n\nform.addEventListener('submit', event => {\n  try {\n    event.preventDefault();\n    localStorage.removeItem('feedback-form-state');\n    const serializedState = localStorage.getItem('feedback-form-state');\n    const inf =\n      serializedState === null\n        ? {\n            email: '',\n            message: '',\n          }\n        : JSON.parse(serializedState);\n\n    console.log(`Email: ${inf.email}`);\n    console.log(`Message: ${inf.message}`);\n    form.reset();\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n});\n"],"names":["$1WSnx","parcelRequire","$b00c40859be242c5$var$form","document","querySelector","$b00c40859be242c5$var$emailInput","$b00c40859be242c5$var$messageInput","addEventListener","$parcel$interopDefault","throttle","event","inf","email","currentTarget","value","message","elements","serializedState","JSON","stringify","localStorage","setItem","error","console","window","getItem","undefined","parse","preventDefault","removeItem","log","concat","reset"],"version":3,"file":"03-feedback.61f0bebf.js.map"}